<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>06_callback함수.html</title>
    <!-- jQuery import -->
    <script src="jquery-3.6.1.min.js"></script>
  </head>
  <body>
    
    <button>* JSON 데이터 받아오기 *</button>
    <div id="panel"></div>
    
    <script>
        $("button").click(function(){
          //$.getJSON(url, callback함수) JSON 데이터를 가져온다
          $.getJSON("sungjuks.json", responseProc);
        });//click end

        function responseProc(result, status, xhr){ //callback함수
          alert(result);
          alert(status);
          alert(xhr); //xhr은 여기에서 사용되었던 object가 무엇인지를 알려줌
          let str="<table border='1'>";
          $.each(result, function(idx, data){
              str += "<tr>";
              str += "  <td>" + data.name + "</td>";
              str += "  <td>" + data.id + "</td>";
              str += "  <td>" + data.kor + "</td>";
              str += "  <td>" + data.eng + "</td>";
              str += "  <td>" + data.mat + "</td>";
              str += "</tr>"
          });//each() end
          str+="</table>";
          $("#panel").empty();//기존 것을 지우고 이번 것만 추가해 달라는 뜻.
          $("#panel").append(str); //댓글 더보기 패턴
        }//responseProc() end
    </script>

  </body>
</html>
